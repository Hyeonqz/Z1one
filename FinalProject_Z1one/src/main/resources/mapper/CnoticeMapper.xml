<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="boot.data.mapper.CnoticeMapperInter">

	<!-- 디테일페이지 or 수정 -->
	<select id="getNoticeData" parameterType="int"
		resultType="CnoticeDto">
		select * from cnotice where cnotice_num=#{cnotice_num}
	</select>
	<!-- 조회수순 리스트정렬 -->
	<select id="readCountList" resultType="CnoticeDto">
		select * from cnotice
<<<<<<< HEAD
		order by cnotice_Readcount desc
=======
		order by cnotice_readcount desc
>>>>>>> eff156aba857b27028a5cf75228e81ee6ed57b5f
	</select>
	<!-- 리스트 세부분류+정렬 -->
	<select id="testList" resultType="CnoticeDto">
		select * from cnotice

		<!-- 세부분류 -->
		<if
			test='industry!=null or career!=null or location!=null or (gradeLeft!=null and gradeRight!=null) or type!=null or academy!=null'>
			where
			<!-- 직종 -->
			<if test='industry!=null'>
				cnotice_industry2 in
				<foreach collection="industry" item="item" open="("
					close=")" separator=",">
					#{item}
				</foreach>
			</if>

			<if test='industry!=null and career!=null'>
				and
			</if>
			<!-- 경력 -->
			<if test='career!=null'>
				<foreach collection="career" item="item2" open="(" close=")"
					separator="or">
					cnotice_career like concat ('%',
					#{item2}, '%')
				</foreach>
			</if>

			<if
				test='(career!=null and location!=null) or (industry!=null and location!=null)'>
				and
			</if>
			<!-- 지역 -->
			<if test='location!=null'>
				<foreach collection="location" item="item3" open="("
					close=")" separator="or">
					cnotice_location like concat ('%',
					#{item3}, '%')
				</foreach>
			</if>

			<if
				test='location!=null and (gradeLeft!=null and gradeRight!=null) or career!=null and (gradeLeft!=null and gradeRight!=null) or industry!=null and (gradeLeft!=null and gradeRight!=null)'>
				and
			</if>

			<!-- 평점 -->
			<if test='(gradeLeft!=null and gradeRight!=null)'>
				cnotice_grade between #{gradeLeft} and #{gradeRight}
			</if>

			<if
				test="(gradeLeft!=null and gradeRight!=null) and type!=null or location!=null and type!=null or career!=null and type!=null or industry!=null and type!=null">
				and
			</if>
			<!-- 고용형태 -->
			<if test='type!=null'>
				cnotice_type in
				<foreach collection="type" item="item4" open="(" close=")"
					separator=",">
					#{item4}
				</foreach>
			</if>

			<if
				test="(type!=null and academy!=null) or (gradeLeft!=null and gradeRight!=null) and academy!=null or (location!=null and academy!=null) or (career!=null and academy!=null) or (industry!=null and academy!=null)">
				and
			</if>
			<!-- 학력 -->
			<if test='academy!=null'>
				cnotice_academy in
				<foreach collection="academy" item="item5" open="("
					close=")" separator=",">
					#{item5}
				</foreach>
			</if>

		</if>
		<!-- 정렬 -->
		<if test='orderBy!=null'>
			<!-- 작성일순 -->
			<if test="orderBy == 'writeday'">
				order by cnotice_writeday desc
			</if>
			<!-- 마감일순 -->
			<if test="orderBy == 'deadline'">
				order by cnotice_deadline desc
			</if>
			<!-- 조회수순 -->
			<if test="orderBy == 'readcount'">
				order by cnotice_readcount desc
			</if>
			<!-- 추천순 -->
			<if test="orderBy == 'recommend'">
				order by cnotice_recommend desc
			</if>
			<!-- 축하금순 -->
			<if test="orderBy == 'congraduate'">
				order by cnotice_congratulate desc
			</if>
		</if>
	</select>
</mapper>